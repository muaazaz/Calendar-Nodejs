<!DOCTYPE html>
<html lang="en">
<%- include('./partials/header.ejs') %>

    <body>
        <form>
            <h1>Edit An Event:</h1>
            <div class="em">
                <label for="name"><i class="arrow right"></i>Name:</label>
                <input type="text" id="name" name="name" value="<%= event.item%>" required placeholder="please enter an name for event">
                <label for="location"><i class="arrow right"></i>Location:</label>
                <input type="text" id="location" value="<%= event.location%>" name="location" required
                    placeholder="please enter an location for event">
            </div>
            <div class="pass">
                <label for="start_time"><i class="arrow right"></i>Start Time:</label>
                <select id="start_time" name="start_time" required>
                    <option value="<%= event.start %>" selected disabled hidden ><%= event.start %></option>
                    <option value="9:00">9:00 </option>
                    <option value="9:30"> 9:30 </option>
                    <option value="10:00"> 10:00 </option>
                    <option value="10:30"> 10:30 </option>
                    <option value="11:00"> 11:00 </option>
                    <option value="11:30"> 11:30 </option>
                    <option value="12:00">12:00 </option>
                    <option value="12:30"> 12:30 </option>
                    <option value="1:00"> 1:00 </option>
                    <option value="1:30"> 1:30 </option>
                    <option value="2:00"> 2:00 </option>
                    <option value="2:30"> 2:30 </option>
                    <option value="3:00"> 3:00 </option>
                    <option value="3:30"> 3:30 </option>
                    <option value="4:00"> 4:00 </option>
                    <option value="4:30"> 4:30 </option>
                    <option value="5:00"> 5:00 </option>
                    <option value="5:30"> 5:30 </option>
                    <option value="6:00"> 6:00 </option>
                    <option value="6:30"> 6:30 </option>
                    <option value="7:00"> 7:00 </option>
                    <option value="7:30"> 7:30 </option>
                    <option value="8:00"> 8:00 </option>
                  </select>
                <label for="end_time"><i class="arrow right"></i>End Time:</label>
                <select id="end_time" name="end_time" required>
                    <option value="<%= event.end %>" selected disabled hidden ><%= event.end %></option>
                    <option value="9:00">9:00 </option>
                    <option value="9:30"> 9:30 </option>
                    <option value="10:00"> 10:00 </option>
                    <option value="10:30"> 10:30 </option>
                    <option value="11:00"> 11:00 </option>
                    <option value="11:30"> 11:30 </option>
                    <option value="12:00">12:00 </option>
                    <option value="12:30"> 12:30 </option>
                    <option value="1:00"> 1:00 </option>
                    <option value="1:30"> 1:30 </option>
                    <option value="2:00"> 2:00 </option>
                    <option value="2:30"> 2:30 </option>
                    <option value="3:00"> 3:00 </option>
                    <option value="3:30"> 3:30 </option>
                    <option value="4:00"> 4:00 </option>
                    <option value="4:30"> 4:30 </option>
                    <option value="5:00"> 5:00 </option>
                    <option value="5:30"> 5:30 </option>
                    <option value="6:00"> 6:00 </option>
                    <option value="6:30"> 6:30 </option>
                    <option value="7:00"> 7:00 </option>
                    <option value="7:30"> 7:30 </option>
                    <option value="8:00"> 8:00 </option>
                  </select>
            </div>
            <button class="btn">Edit Event</button>
        </form>
        <script>
            const form = document.querySelector('form')
            form.addEventListener('submit', async (e) => {
                e.preventDefault()
                const start = form.start_time.value
                const end = form.end_time.value
                const item = form.name.value
                const location = form.location.value
                try {
                    await fetch('/edit/<%= event._id %>', {
                        method: 'POST',
                        body: JSON.stringify({ start, end, item, location}),
                        headers: { 'Content-Type': 'application/json' }
                    })
                    window.location.href = '/events'
                } catch (e) {
                    console.log(e)
                }
            })
        </script>

    </body>
    <%- include('./partials/footer.ejs') %>

</html>